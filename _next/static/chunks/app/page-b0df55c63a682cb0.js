(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1057:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var n=t(5155),u=t(2115);let c=()=>{let[e,r]=(0,u.useState)(!1),[t,c]=(0,u.useState)(440),[l,s]=(0,u.useState)(430),[a,o]=(0,u.useState)(JSON.stringify({pattern:[[100,90,3e3],[90,100,2500],[110,95,3500],[95,110,3e3],[105,92,2500],[92,105,2e3],[115,98,4e3],[98,115,3500],[108,94,3e3],[94,108,2500],[120,100,3500],[100,120,3e3]]},null,2)),[i,d]=(0,u.useState)([]),[m,f]=(0,u.useState)(!1),[g,x]=(0,u.useState)(0),[h,b]=(0,u.useState)(null),p=(0,u.useRef)(null),y=(0,u.useRef)(null),N=(0,u.useRef)(null),v=(0,u.useRef)(null),j=(0,u.useRef)(null),w=(0,u.useRef)(null),F=(0,u.useRef)(null),S=(0,u.useRef)(null),T=(0,u.useRef)(0);(0,u.useEffect)(()=>(p.current||(p.current=new(window.AudioContext||window.webkitAudioContext),y.current=p.current.createOscillator(),N.current=p.current.createOscillator(),v.current=p.current.createStereoPanner(),j.current=p.current.createStereoPanner(),w.current=p.current.createGain(),v.current.pan.value=-1,j.current.pan.value=1,y.current.connect(v.current),N.current.connect(j.current),v.current.connect(w.current),j.current.connect(w.current),w.current.connect(p.current.destination),y.current.frequency.setValueAtTime(t,p.current.currentTime),N.current.frequency.setValueAtTime(l,p.current.currentTime),y.current.start(),N.current.start(),w.current.disconnect()),()=>{if(p.current){if(y.current)try{y.current.stop()}catch(e){console.error("Error stopping left oscillator:",e)}if(N.current)try{N.current.stop()}catch(e){console.error("Error stopping right oscillator:",e)}p.current.close().catch(e=>console.error("Error closing audio context:",e)),p.current=null,y.current=null,N.current=null,v.current=null,j.current=null,w.current=null}}),[]),(0,u.useEffect)(()=>{p.current&&w.current&&(e?(w.current.connect(p.current.destination),y.current&&y.current.frequency.setValueAtTime(t,p.current.currentTime),N.current&&N.current.frequency.setValueAtTime(l,p.current.currentTime),"suspended"===p.current.state&&p.current.resume().catch(e=>console.error("Error resuming audio context:",e))):(w.current.disconnect(),"running"===p.current.state&&p.current.suspend().catch(e=>console.error("Error suspending audio context:",e))))},[e,t,l]),(0,u.useEffect)(()=>{if(!m&&p.current&&y.current&&N.current){let e=p.current.currentTime;y.current.frequency.setValueAtTime(t,e),N.current.frequency.setValueAtTime(l,e)}},[t,l,m]),(0,u.useEffect)(()=>{let t;return e&&m&&i.length>0?(e=>{if(!i||0===i.length)return r(!1);let[n,u,l]=i[e];c(n),s(u),t=setTimeout(()=>{x((e+1)%i.length)},l)})(g):!e&&m&&x(0),()=>{t&&clearTimeout(t)}},[e,m,i,g]);let A=()=>{try{let e=JSON.parse(a);Array.isArray(e.pattern)&&e.pattern.every(e=>Array.isArray(e)&&3===e.length&&"number"==typeof e[0]&&e[0]>0&&"number"==typeof e[1]&&e[1]>0&&"number"==typeof e[2]&&e[2]>0)?(d(e.pattern),b(null),x(0)):(d([]),b("Invalid pattern format. Expected array of [number, number, number]."))}catch(e){d([]),b("Invalid JSON format."),console.error("Parsing error:",e)}};return(0,u.useEffect)(()=>{A()},[a]),(0,u.useEffect)(()=>{let r=F.current;if(!r)return;let n=r.getContext("2d");if(!n)return;let u=r.width,c=r.height,s=c/4,a=c/2,o=0,i=r=>{if(!e){n.clearRect(0,0,u,c),S.current&&(cancelAnimationFrame(S.current),S.current=null);return}o||(o=r);let d=(r-o)/1e3;o=r,T.current+=2*d*Math.PI*2,n.clearRect(0,0,u,c),n.beginPath(),n.strokeStyle="#60a5fa",n.lineWidth=2;for(let e=0;e<u;e++){let r=a+s*Math.sin(2*Math.PI*t*(e/u)+T.current);0===e?n.moveTo(e,r):n.lineTo(e,r)}n.stroke(),n.beginPath(),n.strokeStyle="#4ade80",n.lineWidth=2;for(let e=0;e<u;e++){let r=a+s*Math.sin(2*Math.PI*l*(e/u)+T.current);0===e?n.moveTo(e,r):n.lineTo(e,r)}n.stroke(),S.current=requestAnimationFrame(i)};return S.current=requestAnimationFrame(i),()=>{S.current&&cancelAnimationFrame(S.current)}},[e,t,l]),(0,n.jsxs)("div",{className:"min-h-screen bg-gray-900 text-gray-100 p-8 flex flex-col items-center",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-8 text-blue-400",children:"Binaural Beat Player"}),(0,n.jsx)("button",{onClick:()=>{r(!e)},className:"px-6 py-3 rounded-lg text-lg font-semibold transition-colors duration-200 mb-8\n          ".concat(e?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700","\n          text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900\n          ").concat(e?"focus:ring-red-500":"focus:ring-green-500"),children:e?"Pause":"Play"}),(0,n.jsx)("div",{className:"mb-8",children:(0,n.jsxs)("button",{onClick:()=>{f(!m),r(!1),x(0),b(null),m||A()},className:"px-4 py-2 rounded-lg text-sm font-medium bg-gray-700 hover:bg-gray-600 text-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-blue-500",children:["Switch to ",m?"Manual Mode":"Pattern Mode"]})}),!m&&(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-8 mb-8 w-full max-w-md",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("label",{htmlFor:"leftFreq",className:"block text-sm font-medium text-gray-300 mb-2",children:"Left Frequency (Hz)"}),(0,n.jsx)("input",{id:"leftFreq",type:"number",value:t,onChange:e=>{let r=parseFloat(e.target.value);!isNaN(r)&&r>0?c(r):""===e.target.value&&c(0)},min:"1",step:"1",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-gray-100 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("label",{htmlFor:"rightFreq",className:"block text-sm font-medium text-gray-300 mb-2",children:"Right Frequency (Hz)"}),(0,n.jsx)("input",{id:"rightFreq",type:"number",value:l,onChange:e=>{let r=parseFloat(e.target.value);!isNaN(r)&&r>0?s(r):""===e.target.value&&s(0)},min:"1",step:"1",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-gray-100 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),m&&(0,n.jsxs)("div",{className:"w-full max-w-xl mb-8",children:[(0,n.jsx)("label",{htmlFor:"patternInput",className:"block text-sm font-medium text-gray-300 mb-2",children:"Pattern (JSON: [[leftHz, rightHz, durationMs], ...])"}),(0,n.jsx)("textarea",{id:"patternInput",value:a,onChange:e=>{o(e.target.value)},rows:10,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-md text-gray-100 font-mono text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., [[100, 90, 3000], [90, 100, 2500]]"}),h&&(0,n.jsx)("p",{className:"mt-2 text-sm text-red-400",children:h}),i.length>0&&(0,n.jsxs)("p",{className:"mt-2 text-sm text-green-400",children:["Pattern parsed successfully. ",i.length," steps."]}),m&&e&&i.length>0&&(0,n.jsxs)("p",{className:"mt-2 text-sm text-blue-400",children:["Playing step ",g+1," of ",i.length,"..."]})]}),(0,n.jsxs)("div",{className:"w-full max-w-2xl bg-gray-800 rounded-lg p-4 border border-gray-700",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-200 mb-4",children:"Wave Visualizer"}),(0,n.jsx)("canvas",{ref:F,width:600,height:200,className:"w-full h-auto border border-gray-600 rounded-md"}),(0,n.jsxs)("div",{className:"mt-4 text-sm text-gray-400",children:[(0,n.jsxs)("p",{children:["Left Wave: ",(0,n.jsx)("span",{className:"text-blue-400",children:"Blue"})]}),(0,n.jsxs)("p",{children:["Right Wave: ",(0,n.jsx)("span",{className:"text-green-400",children:"Green"})]}),(0,n.jsxs)("p",{children:["Current Frequencies: Left ",t.toFixed(2)," Hz, Right ",l.toFixed(2)," Hz"]})]})]})]})}},1110:(e,r,t)=>{Promise.resolve().then(t.bind(t,1057))}},e=>{var r=r=>e(e.s=r);e.O(0,[441,684,358],()=>r(1110)),_N_E=e.O()}]);